<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>

<body>
  <div class="container">

    <div class="jumbotron">
      <h3 class="display-6">¡Gracias por ser parte del entrenamiento de la nueva Asistente Virtual Abastible!</h3>
      <hr class="my-4">
      <p>Recuerda que tu colaboración es para evaluar a la Asistente Virtual y en ningún caso a ti. Por lo mismo, te pedimos que en tu conversación con la Asistente Virtual sea lo más natural posible, como un ciudadan@ más.
      </p>

	<div class="alert alert-primary">
		Tu número de teléfono asignado es: <b id="phone"></b>
	</div>
	<div id="address-container"></div>

      <p>Antes de empezar lee atentamente las siguientes instrucciones:</p>

      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <ol class="list-group list-group-flush">
              <li class="list-group-item">Con la Asistente Virtual podrás: hacer un <b>Pedido de Gas</b> y hacer consultas sobre <b>Botón</b> y <b>Medidor Abastible</b>.</li>
              <li class="list-group-item" id="address-instruction"></li>
              <li class="list-group-item">Si la Asistente Virtual te responde de forma equivocada escribe <b>ERROR</b> (en MAYÚSCULAS y sin espacios) y podrás explicar los detalles del error cometido.</li>
              <li class="list-group-item">Cuando desees finalizar la conversación, escribe <b>CALIFICAR</b> (en MAYÚSCULAS y sin espacios) en la conversación y podrás ponerle una nota de 1 a 7 a tu experiencia.</li>
            </ol>
          </div>
        </div>
      </div>

	<br>

	<a role="button" href="https://www.messenger.com/t/378836019260812" target="_blank" class="btn btn-primary">Iniciar conversación</a>

	<br><br>

      <div>
        Muchas gracias por tu participación, recuerda que al CALIFICAR estarás participando por increíbles premios.
      </div>
    </div>
  </div>
  
  <script type="text/javascript">
    (function() {
      var tc = document.createElement("script");
      tc.type = "text/javascript";
      tc.async = true;
      tc.src = "https://app.talkcenter.io/v2/talkcenter.min.js";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(tc, s);
    })();
    window.TalkCenter = {
      token: "1f004e7504e48dc156496f7112bc7266"
    };

    var clients = {
        '223152070': [null, 'AVENIDA LAS NIEVES ORIENTE 715, PUENTE ALTO'],
        '225611073': [null, 'LAS ARAUCARIAS 1192, EL BOSQUE'],
        '228735425': [null, 'BANDERA 344, SANTIAGO'], // Dos direcciones, pero una se omite porque está mal escrita
        '225289834': [null, 'OCEANO ATLANTICO 13221, EL BOSQUE', 'GENERAL SILVA 12850, EL BOSQUE'],
        '984153233': [null],
        '322567158': [null]
    };

    function chooseAny(someList) {
        var randIndex = Math.floor(Math.random() * someList.length);
        return someList[randIndex];
    }

    function getPhone() {
        var phonesList = Object.keys(clients);
        return chooseAny(phonesList);
    }

    function getAddress(phone) {
        var addresses = clients[phone];
        var address = chooseAny(addresses);
        return address
    }

    var phone = getPhone();
    var address = getAddress(phone);

    var addressContainer = document.getElementById('address-container');
    var addressInstruction = document.getElementById('address-instruction');


    // IF IE 11
    if (!(window.ActiveXObject) && "ActiveXObject" in window){
        var textNode = document.createTextNode(phone);
        var phoneElement = document.getElementById('phone');
        phoneElement.appendChild(textNode)
    } else{
        document.getElementById('phone').append(phone);
    }
    if (address) {
        addressContainer.innerHTML = '<div class="alert alert-primary">Tu dirección asignada es: <b>' + address + '</b></div>';
        addressInstruction.innerHTML = 'Para hacer un pedido utiliza el <b>N° de teléfono</b> y la <b>dirección</b> que se te asignaron en la parte superior de esta pantalla, no puedes utilizar otros.';
    } else {
        addressInstruction.innerHTML = 'Para hacer un pedido utiliza el <b>N° de teléfono</b> que se te asigno en la parte superior de esta pantalla, no puedes utilizar otro. Eres libre de usar la dirección que quieras.';
    }

  </script>

</body>
